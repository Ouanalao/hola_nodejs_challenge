function n(a,b,c,d){if(b===a.length)for(var e=c.v,f=0;f<e.length;f++)d.push(e[f]);e=a[b];63!==e&&42!==e&&(e=c.c[e])&&n(a,b+1,e,d);(e=c.c[63])&&n(a,b+1,e,d);if(c=c.c[42])for(;b<=a.length;)n(a,b++,c,d)}function v(a,b){for(var c=[],d=0;d<a.length;)c[d]=a.charCodeAt(d++);d=[];n(c,0,b,d);return d}function w(a,b,c){for(var d=0;d<b.length;){var e=b.charCodeAt(d++),f=a.c[e];f||(a.c[e]=f={v:[],c:Array(128)});a=f}a.v.push(c)}function x(a){for(var b=[],c=0;c<a.length;)0<b.length&&a[c]===b[b.length-
1]||b.push(a[c]),c++;return b}function y(a,b){var c=a.length;if(0===c)return b;var d=b.length;if(0===d)return a;for(var e=[],f=0,q=0,h=0;h<c+d;)e[h++]=f<c&&(q===d||a[f]<b[q])?a[f++]:b[q++];return e}module.exports=function(a,b){for(var c={},d=[],e=[],f={v:[],c:Array(128)},q={v:[],c:Array(128)},h=0;h<b.length;){var r=b[h];void 0===r.from?d.push(h):w(f,r.from,h);void 0===r.to?e.push(h):w(q,r.to,h);h++}var h=Object.create(null),n;for(n in a){var r=n,m=a[n],z=b,k=h,p=q,g=e,l=m,u=f,A=d,t=k[l.from];void 0===
t&&(k[l.from]=t={f:void 0,t:void 0});void 0===t.f&&(t.f=y(x(v(l.from,u).sort()),A));l=t.f;u=g;g=k[m.to];void 0===g&&(k[m.to]=g={f:void 0,t:void 0});void 0===g.t&&(g.t=y(x(v(m.to,p).sort()),u));k=l;g=g.t;p=[];for(l=m=0;m<k.length&&l<g.length;)k[m]===g[l]?(p.push(k[m++]),l++):k[m]<g[l]?m++:l++;k=p;g=[];for(p=0;p<k.length;)g[p]=z[k[p++]].action;c[r]=g}return c}
